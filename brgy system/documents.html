<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Request Documents</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    /* Modal styling */
    #image-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.75);
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 1rem;
    }
    #image-modal img {
      max-width: 90vw;
      max-height: 80vh;
      border-radius: 0.5rem;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
    }
    .modal-content {
      background: #1f2937; /* dark background */
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      text-align: center;
      max-width: 95vw;
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.5);
    }
    .exit-btn {
      background: #ef4444;
      color: white;
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    #download-btn {
      background: #3b82f6;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 1rem;
    }
    .submitted-image {
      max-width: 150px;
      max-height: 150px;
      object-fit: cover;
      border-radius: 0.375rem;
      cursor: pointer;
      border: 2px solid #3b82f6;
      transition: transform 0.2s ease;
    }
    .submitted-image:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
  <!-- Navigation -->
  <nav
    class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50"
  >
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <div class="flex-shrink-0 flex items-center">
            <i
              class="fas fa-home text-primary-600 dark:text-primary-400 text-2xl mr-2"
            ></i>
            <span
              class="text-xl font-bold text-gray-800 dark:text-white"
              >Barangay Portal</span
            >
          </div>
        </div>
        <div
          class="hidden md:ml-6 md:flex md:items-center md:space-x-4"
        >
          <a
            href="index.html"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"
            >Home</a
          >
          <a
            href="services.html"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"
            >Services</a
          >
          <a
            href="documents.html"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"
            >Documents</a
          >
          <a
            href="announcements.html"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"
            >Announcements</a
          >
          <a
            href="contact.html"
            class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"
            >Contact</a
          >
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main
    class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"
  >
    <h1
      class="text-3xl font-bold text-gray-800 dark:text-white mb-6"
    >
      Request Documents
    </h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Barangay Clearance Form -->
      <div
        class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"
      >
        <h3
          class="text-lg font-semibold text-gray-800 dark:text-white mb-2"
        >
          Barangay Clearance
        </h3>
        <p
          class="text-gray-600 dark:text-gray-300 mb-4"
        >
          Required for various legal and business
          transactions.
        </p>
        <form id="barangay-clearance-form" class="space-y-4">
          <div>
            <label
              for="barangay-clearance-purpose"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
              >Purpose <span class="text-red-500">*</span></label
            >
            <input
              type="text"
              id="barangay-clearance-purpose"
              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          <div>
            <label
              for="barangay-clearance-id"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
              >Valid ID <span class="text-red-500">*</span></label
            >
            <input
              type="file"
              id="barangay-clearance-id"
              accept="image/*"
              class="w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          <button
            type="submit"
            class="w-full bg-primary-600 hover:bg-primary-700 text-white py-2 px-4 rounded-md transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
          >
            Submit Request
          </button>
        </form>
      </div>

      <!-- Residency Certificate Form -->
      <div
        class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"
      >
        <h3
          class="text-lg font-semibold text-gray-800 dark:text-white mb-2"
        >
          Certificate of Residency
        </h3>
        <p
          class="text-gray-600 dark:text-gray-300 mb-4"
        >
          Proof of residence within the barangay.
        </p>
        <form id="residency-certificate-form" class="space-y-4">
          <div>
            <label
              for="residency-proof"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
              >Proof of Address <span class="text-red-500">*</span></label
            >
            <input
              type="file"
              id="residency-proof"
              accept="image/*"
              class="w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          <div>
            <label
              for="residency-duration"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
              >Duration of Residency <span class="text-red-500">*</span></label
            >
            <input
              type="text"
              id="residency-duration"
              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          <button
            type="submit"
            class="w-full bg-primary-600 hover:bg-primary-700 text-white py-2 px-4 rounded-md transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
          >
            Submit Request
          </button>
        </form>
      </div>
    </div>

    <!-- Submitted Requests List -->
    <section
      id="submitted-requests"
      class="mt-12 max-w-4xl mx-auto"
    >
      <h2
        class="text-2xl font-bold mb-6 text-gray-800 dark:text-white"
      >
        Submitted Requests
      </h2>
      <div id="requests-list" class="space-y-6"></div>
    </section>
  </main>

  <!-- Image Modal -->
  <div
    id="image-modal"
    class="flex"
    style="display:none;"
  >
    <div class="modal-content">
      <button
        id="modal-exit-btn"
        class="exit-btn"
        title="Exit"
      >
        Exit
      </button>
      <br />
      <img src="" alt="Full Size Preview" />
      <br />
      <button id="download-btn">Save Image</button>
    </div>
  </div>

  <script>
    const requestsList = document.getElementById('requests-list');
    const modal = document.getElementById('image-modal');
    const modalImg = modal.querySelector('img');
    const downloadBtn = document.getElementById('download-btn');
    const exitBtn = document.getElementById('modal-exit-btn');
    let currentImageSrc = '';

    // Utility: create submitted request card
    function createRequestCard(service, purpose, fileName, imageSrc) {
      const container = document.createElement('div');
      container.className =
        'bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 flex flex-col md:flex-row md:items-center md:justify-between';

      const info = document.createElement('div');
      info.className = 'mb-4 md:mb-0';

      info.innerHTML = `
        <p><strong>Service:</strong> ${service}</p>
        <p><strong>Purpose/Duration:</strong> ${purpose}</p>
        <p><strong>File Name:</strong> ${fileName}</p>
      `;

      const img = document.createElement('img');
      img.src = imageSrc;
      img.alt = `${service} uploaded image`;
      img.className = 'submitted-image';
      img.title = 'Click to view full image';
      img.addEventListener('click', () => openModal(imageSrc));

      container.appendChild(info);
      container.appendChild(img);

      return container;
    }

    // Open modal function
    function openModal(imgSrc) {
      currentImageSrc = imgSrc;
      modalImg.src = imgSrc;
      modal.style.display = 'flex';
    }

    // Close modal function
    exitBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      modalImg.src = '';
      currentImageSrc = '';
    });

    // Download image function
    downloadBtn.addEventListener('click', () => {
      if (!currentImageSrc) return;
      const link = document.createElement('a');
      link.href = currentImageSrc;
      link.download = 'document-image.png';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });

    // Handle Barangay Clearance form submission
    document
      .getElementById('barangay-clearance-form')
      .addEventListener('submit', function (e) {
        e.preventDefault();

        const purposeInput = this.querySelector(
          '#barangay-clearance-purpose'
        );
        const fileInput = this.querySelector('#barangay-clearance-id');

        if (!purposeInput.value.trim() || !fileInput.files.length) {
          alert('Please fill out all required fields.');
          return;
        }

        const file = fileInput.files[0];
        const reader = new FileReader();

        reader.onload = function (event) {
          const imageSrc = event.target.result;

          // Create and append the submitted request card
          const card = createRequestCard(
            'Barangay Clearance',
            purposeInput.value.trim(),
            file.name,
            imageSrc
          );
          requestsList.appendChild(card);

          // Reset form
          e.target.reset();
        };
        reader.readAsDataURL(file);
      });

    // Handle Residency Certificate form submission
    document
      .getElementById('residency-certificate-form')
      .addEventListener('submit', function (e) {
        e.preventDefault();

        const durationInput = this.querySelector('#residency-duration');
        const fileInput = this.querySelector('#residency-proof');

        if (!durationInput.value.trim() || !fileInput.files.length) {
          alert('Please fill out all required fields.');
          return;
        }

        const file = fileInput.files[0];
        const reader = new FileReader();

        reader.onload = function (event) {
          const imageSrc = event.target.result;

          // Create and append the submitted request card
          const card = createRequestCard(
            'Certificate of Residency',
            durationInput.value.trim(),
            file.name,
            imageSrc
          );
          requestsList.appendChild(card);

          // Reset form
          e.target.reset();
        };
        reader.readAsDataURL(file);
      });
  </script>
</body>
</html>
